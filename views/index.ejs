<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Bartwith.me</title>
        <link rel="icon" type="image/ico" href="/img/favicon.ico" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- styles -->
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="/css/master.css" rel="stylesheet">

        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
          window.fbAsyncInit = function() {
            FB.init({
              appId      : '254514314669541', // App ID
              //channelUrl : 'http://localhost/html/channel.html', // Channel File
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });

            // Additional initialization code here
            FB.Event.subscribe("auth.statusChange", function (response) {
                if (response.authResponse) {
                    console.log("Authenticated!!!");
                }
                else {
                    console.log("Not authed or not logged in");
                }
            });
          };

          // Load the SDK Asynchronously
          (function(d){
             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all.js";
             ref.parentNode.insertBefore(js, ref);
           }(document));
        </script>

        <script>
            document._id = "<%= user._id %>";
            document.userName = "<%= user.name %>"

            function proceed () {
                $.post(
                    $("#postStuff").val(),
                    $.parseJSON($("#postStuffData").val()),
                    function (data) {
                        $("#postResponse").text(JSON.stringify(data));
                    },
                    "json"
                );
            }
        </script>
        
    </head>

    <body>

        <div>

            <p>Welcome User: <%= user.name %></p>
            <input type="text" id="postStuff" size="25" value="">
            <input type="text" id="postStuffData" size="25" value="">
            <button type="button" onclick="proceed();">POST</button> 
            <div id="postResponse"></div>
        </div> 

        <script>
            FB.api('/me', function(response) {
                alert('Your name is ' + response.name);
}           );
        </script>

        <!-- javascript -->
        <script src="/socket.io/socket.io.js"></script>

    </body>
</html>